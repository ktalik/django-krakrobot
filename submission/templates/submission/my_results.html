{% extends 'submission/base.html' %}
{% block body %}

{% if team %}

    {% if not submissions %}

    <div class="info">
        {% include 'submission/messages/no_submissions.html' %}
    </div>

    {% endif %}

    <div class="results">
    {% for submission in submissions %}

        <p class="submission">
<i id="date">
Przesłano w dniu {{ submission.date }}:
</i>
{{ submission.id }}
        </p>

        {% if "processing" in submission.results.0 %}
            <div class="test">
Przetwarzanie...
            </div>

        {% elif "timed_out" in submission.results.0 %}
            <div class="warning">
API symulatora nie działa. Spróbuj ponownie za chwilę. W razie dalszych problemów, prosimy o kontakt.
            </div>

        {% elif "error" in submission.results.0 and submission.results.0.error %}
            <div class="test">
Błąd wysyłania. Spróbuj ponownie za chwilę. W razie dalszych problemów, prosimy o kontakt.
            </div>

        {% else %}

            {% for result in submission.results %}

                <div class="test">

                <h2>
                Test: <b>{{ result.test_name }}</b>
                </h2>

                <div class="result">
                <table style="width:800px">

                    <tr>
                    <td class="title"><b>Goal:</b></td>
                    <td>
                    {{ result.goal_achieved | default:'unknown' }}</td>
                    </tr>

                    <tr>
                    <td class="title"><b>Błąd:</b></td>
                    <td>{{ result.error }}</td>
                    </tr>

                    <tr>
                    <td class="title"><b>Czas symulacji:</b></td>
                    <td>{{ result.sim_time }}</td>
                    </tr>

                    <tr>
                    <td class="title"><b>Czas obliczeń:</b></td>
                    <td>{{ result.cpu_time }}</td>
                    </tr>

                    <tr>
                    <td class="title"><b>Wizualizacja:</b></td>
                    <td>
                    <table>
                {% for row in result.picture %}
                    <tr>
                    {% for col in row %}

                        <td
                        {% if col.wall %}
                            style="background-color: darkred;"
                        {% else %}
                            style=
                            "
                            background-color: rgba(
                                {{col.color.0}},
                                {{col.color.1}},
                                {{col.color.2}},
                                0.75);
                            "
                        {% endif %}
                            height="52"
                            width="32"
                        >

                        {% if col.start %}
                            <b>
                            &#x2691;S
                            </b>
                        {% endif %}

                        {% if col.beep %}
                            <b style="color:darkred;">
                            &#x26A1;{{col.beep}}
                            </b>
                        {% endif %}
                        </td>

                    {% endfor %}
                    </tr>
                {% endfor %}
                    </table>
                    </td>
                    </tr>

                    <tr>
                    <td class="title"><b>Objaśnienie:</b></td>
                    <td>
<b>
&#x2691;S
</b>
- punkt początkowy <br>
<b style="color:darkred;">
&#x26A1;X
</b>
- piknięcie nr X<br>
                    </td>
                    </tr>

                    <tr class="log">
                    <td class="title"><b>Log:</b></td>
                    <td class="log">
                        <div style="width: 700px;">
                            <p>
                {% for line in result.log %}
                    {{ line }}<br>
                {% endfor %}
                            </p>
                        </div>
                    </td>
                    </tr>
                </table>

                </div>
            </div>
            {% endfor %}
        {% endif %}

    {% endfor %}
    </div>

{% else %}

<div class="warning">
    {% include 'submission/messages/no_team.html' %}
</div>

{% endif %}

{% endblock %}
